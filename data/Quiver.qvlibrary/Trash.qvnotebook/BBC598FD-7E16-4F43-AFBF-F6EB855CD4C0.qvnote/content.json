{
  "title": "使用GC条查看heap和GC的情况",
  "cells": [
    {
      "type": "text",
      "data": "<div style=\"word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; white-space: normal;\"><div><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\">机子是Ubuntu12.04,老是无响应。重装eclipse至最新的4.2.1，再是改eclipse.ini，再是查看vi插件有无影响，效果甚微后再试其他方案，废了很长时间，才算解决。现总结如下：</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\"><strong>1.首先监控你的电脑系统资源占用情况</strong>：Ubuntu启用System monitor，查看processes和resources两项。</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\">&nbsp; &nbsp;若你的情况是eclipse占用近100%的cpu，而memory占用还不到一半，请往下看；</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\">&nbsp; &nbsp; 这种情况再怎么设置elipse.ini也没什么大用，搞不好还一打开eclipse就会自动重启。因为上面已显示的很清楚，不是内存不够用，是cpu占用过多。相信我，别把时间浪费在设置eclipse.ini上，默认的eclipse.ini够用。至少我的情况是这样。</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\"><br/></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\"><strong>2.使用GC条查看heap和GC的情况</strong></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\">&nbsp; &nbsp; &nbsp;你可以用这个确认，你的问题不是内存引起的。而且可以自己手动GC</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\">&nbsp; &nbsp; &nbsp;进入yourworkspace/.metadata/.plugins/<span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">org.eclipse.core.runtime/<span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">.settings/（我的是ubuntu，windows请换分隔符）。然后编辑<span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">org.eclipse.ui.prefs文件，加上一句<span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">SHOW_MEMORY_MONITOR=true。保存退出重启elipse后，在elipse底部中央你会看到这个</span></span></span></span></span><img src='quiver-image-url/8272FDBFEF9D732193A1DA05501020E8' style='border: none; max-width: 100%;'><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">，鼠标放上去会有参数提示，提示的就是你elipse.ini里设置的jvm运行时的情况，若你的也跟我的一样，heap size只占用不到512的一半，就不要再设置什么eclipse.ini了。</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 12px;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">&nbsp; &nbsp; &nbsp;点击垃圾箱图标，可以手动GC，挺实用。</span></span></span></span></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-size: 12px;\"><br/></span></span></span></span></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-size: 12px;\"><strong>3.用visualvm查看哪个thread占用elipse过多</strong></span></span></span></span></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">&nbsp; &nbsp;现在版本的jdk自带visualvm工具。ubuntu下可以用全路径打开。不知道在哪啊。可以使用which命令。比如现在的visualvm对应的就是jvisualvm.终端which jvisualvm就出来它的全路径了。我机子上是/home/develop/program/jdk1.6.0_33/bin/jvisualvm。在终端输入后就会启动，然后启动查看你的eclipse的thread使用情况。</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">&nbsp; 在查看时，发现点击logcat会导致cpu近100%。一下子明确了问题；</span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\"><br/></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\"><strong>4.logcat导致cpu占用100%</strong></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">&nbsp; &nbsp;&nbsp;<span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">cd /usr/lib/i386-linux-gnu</span></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">&nbsp; &nbsp;<span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\">sudo mv libgailutil.so.18.0.1 anothername</span></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">&nbsp; &nbsp;<strong>就是将</strong><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><strong>libgailutil.so.18.0.1重命名即可</strong>。</span></span></p><p style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif; font-size: 12px;\">&nbsp; &nbsp;我的就是这样解决的。你也可以参见这个bug讨论区的方法。<a href=\"http://code.google.com/p/android/issues/detail?id=34641\" style=\"color: rgb(51, 102, 153); text-decoration: none;\">http://code.google.com/p/android/issues/detail?id=34641</a></span></p></div><div><br/></div><div style=\"color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><div><span style=\"font-family: Helvetica, Arial, &quot;Droid Sans&quot;, sans-serif;\"><span style=\"font-size: 12px;\">&nbsp; &nbsp;仔细尝试别人说的方法。别学国内it人，自己不尝试就狂抄狂转载，结果找遍国内论坛，几个解决方案抄来抄去，却是一律不解决问题</span><span style=\"font-size: 14px;\">。&nbsp;</span></span></div></div></div>"
    }
  ]
}