{
  "title": "python报错问题解决：'ascii' codec can't encode character",
  "cells": [
    {
      "type": "text",
      "data": "<div style=\"word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; white-space: normal;\"><div style=\"margin: 0px 0px 20px; padding: 0px; word-break: break-word; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);\"><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">之前部署了openstack虚拟化环境，有一天在使用nova list查看虚拟机的时候，突然报错！如下：</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">[root@linux-node1 src]# nova list<br style=\"margin: 0px; padding: 0px;\"/><span style=\"margin: 0px; padding: 0px; background-color: rgb(204, 153, 255);\">ERROR (UnicodeEncodeError): &apos;ascii&apos; codec can&apos;t encode character u&apos;\\uff08&apos; in position 9: ordinal not in range(128)</span></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">python在安装时，默认的编码是ascii，当程序中出现非ascii编码时，python的处理常常会报这样的错，python没办法处理非ascii编码的，此时需要自己设置将python的默认编码，一般设置为utf8的编码格式。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">查阅网上，可以在程序中修改所有涉及到编码的地方，强制编码为utf8，即添加代码encode(&quot;utf8&quot;)，这种方法并不推荐使用，因为一旦少写一个地方，将会导致大量的错误报告。<br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\"><span style=\"margin: 0px; padding: 0px; background-color: rgb(255, 204, 0);\">-------------------------------------------------</span><br style=\"margin: 0px; padding: 0px;\"/><span style=\"margin: 0px; padding: 0px; background-color: rgb(255, 204, 0);\">这里介绍一个一次性修改后永久生效的方法：</span><br style=\"margin: 0px; padding: 0px;\"/>\n在python的lib\\site-packages文件夹下新建一个sitecustomize.py<br style=\"margin: 0px; padding: 0px;\"/>\n[root@linux-node1 nova]# find / -name site-packages<br style=\"margin: 0px; padding: 0px;\"/><span style=\"margin: 0px; padding: 0px; background-color: rgb(255, 153, 204);\">/usr/lib/python2.7/site-packages</span><br style=\"margin: 0px; padding: 0px;\"/>\n/usr/lib64/python2.7/site-packages</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">[root@linux-node1 nova]# cd /usr/lib/python2.7/site-packages/<br style=\"margin: 0px; padding: 0px;\"/>\n[root@linux-node1 site-packages]# cat&nbsp;<span style=\"margin: 0px; padding: 0px; background-color: rgb(255, 153, 204);\">sitecustomize.py</span>&nbsp;#添加如下内容，设置编码为utf8<br style=\"margin: 0px; padding: 0px;\"/><strong style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; color: rgb(255, 0, 0);\"># encoding=utf8&nbsp;</span></strong><br style=\"margin: 0px; padding: 0px;\"/><strong style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; color: rgb(255, 0, 0);\">import sys&nbsp;</span></strong><br style=\"margin: 0px; padding: 0px;\"/><br style=\"margin: 0px; padding: 0px;\"/><strong style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; color: rgb(255, 0, 0);\">reload(sys)&nbsp;</span></strong><br style=\"margin: 0px; padding: 0px;\"/><strong style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; color: rgb(255, 0, 0);\">sys.setdefaultencoding(&apos;utf8&apos;)</span></strong></p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\"><br style=\"margin: 0px; padding: 0px;\"/>\n此时重启python解释器，执行sys.getdefaultencoding()，发现编码已经被设置为utf8的了，多次重启之后，效果相同，这是因为系统在python启动的时候，自行调用该文件，设置系统的默认编码，而不需要每次都手动的加上解决代码，属于一劳永逸的解决方法。</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">[root@linux-node1 nova]# python &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #终端进入python，即是重启python解释器！可以多次进入<br style=\"margin: 0px; padding: 0px;\"/>\nPython 2.7.5 (default, Aug 18 2016, 15:58:25)&nbsp;<br style=\"margin: 0px; padding: 0px;\"/>\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-4)] on linux2<br style=\"margin: 0px; padding: 0px;\"/>\nType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.<br style=\"margin: 0px; padding: 0px;\"/>\n&gt;&gt;&gt;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">&nbsp;</p><p style=\"margin: 10px auto; padding: 0px; color: rgb(0, 0, 0); font-size: 13px; text-indent: 0px;\">接着，再次使用nova list命令，就没有那个报错了！<br style=\"margin: 0px; padding: 0px;\"/>\n[root@linux-node1 src]# nova list<br style=\"margin: 0px; padding: 0px;\"/>\n+--------------------------------------+----------------------------+--------+------------+-------------+--------------------+<br style=\"margin: 0px; padding: 0px;\"/>\n| ID | Name | Status | Task State | Power State | Networks |<br style=\"margin: 0px; padding: 0px;\"/>\n+--------------------------------------+----------------------------+--------+------------+-------------+--------------------+<br style=\"margin: 0px; padding: 0px;\"/>\n| b6a4738d-7e01-4068-a09b-7008b612d126 | beta-new1（beta环境1） | ACTIVE | - | Running | flat=192.168.1.151 |<br style=\"margin: 0px; padding: 0px;\"/>\n| 9acdb28b-02c2-41bb-87c4-5f3a8fa008ab | dev-new-test1（测试环境1） | ACTIVE | - | Running | flat=192.168.1.150 |<br style=\"margin: 0px; padding: 0px;\"/>\n| 30e5ba3e-3942-4119-9ba6-7523cf865b6f | kvm-server003 | ACTIVE | - | Running | flat=192.168.1.152 |<br style=\"margin: 0px; padding: 0px;\"/>\n| a2893208-3ec9-4606-ab82-d7a870206cb9 | kvm-server004 | ACTIVE | - | Running | flat=192.168.1.153 |<br style=\"margin: 0px; padding: 0px;\"/>\n| 3483d9f1-4015-48d9-9837-b67ca82dd54d | kvm-server005 | ACTIVE | - | Running | flat=192.168.1.154 |<br style=\"margin: 0px; padding: 0px;\"/>\n+--------------------------------------+----------------------------+--------+------------+-------------+--------------------+</p></div><div style=\"margin: 0px; padding: 0px; display: block; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);\">***************当你发现自己的才华撑不起野心时，就请安静下来学习吧***************</div><div style=\"margin: 20px 0px 0px; padding: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);\"><div style=\"margin: 0px 0px 10px; padding: 0px;\"><div>分类:&nbsp;<a href=\"http://www.cnblogs.com/kevingrace/category/796286.html\" style=\"margin: 0px; padding: 0px; color: rgb(7, 93, 179); text-decoration: underline;\" target=\"_blank\">Linux-问题/经验/总结</a>,<a href=\"http://www.cnblogs.com/kevingrace/category/796272.html\" style=\"margin: 0px; padding: 0px; color: rgb(7, 93, 179); text-decoration: underline;\" target=\"_blank\">Linux-虚拟化</a>,<a href=\"http://www.cnblogs.com/kevingrace/category/796274.html\" style=\"margin: 0px; padding: 0px; color: rgb(7, 93, 179); text-decoration: underline;\" target=\"_blank\">Python之美</a></div></div></div></div>"
    }
  ]
}